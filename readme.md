# UIII-Act-7-models.py-y-https-www.dbdesigner.net-

## DBdesigner:
<img width="1344" height="679" alt="image" src="https://github.com/user-attachments/assets/df1a22c3-c184-4803-a09e-2fcad6e49171" />
<img width="1742" height="956" alt="image" src="https://github.com/user-attachments/assets/08d925e1-d56e-45ed-9e23-ef4456b932e0" />
<img width="1717" height="853" alt="image" src="https://github.com/user-attachments/assets/e823af76-7828-4976-80f4-8bf21b3a5c53" />
<img width="1725" height="927" alt="image" src="https://github.com/user-attachments/assets/825ff671-0108-4478-815b-744f4f77ac7c" />
<img width="1721" height="1002" alt="image" src="https://github.com/user-attachments/assets/0dc5a945-d49c-427f-9324-88fbdbca4cbf" />
<img width="1820" height="978" alt="image" src="https://github.com/user-attachments/assets/46617462-3da5-4b43-b3da-f173848c5041" />
<img width="1736" height="955" alt="image" src="https://github.com/user-attachments/assets/d8671fad-5ebb-4942-9098-0944a286a3eb" />
<img width="1743" height="982" alt="image" src="https://github.com/user-attachments/assets/e4a49f18-a4a0-4e7b-b898-287b6a56282c" />
<img width="1753" height="962" alt="image" src="https://github.com/user-attachments/assets/29cd2beb-4a9c-4603-9236-27e7e186b9bc" />
pasientes 
<img width="1722" height="951" alt="image" src="https://github.com/user-attachments/assets/fdf22ebe-9343-4ea0-b6c0-287619f0a392" />
<img width="1652" height="936" alt="image" src="https://github.com/user-attachments/assets/42da0c71-e905-4e74-a290-6a8e1cf33471" />
<img width="1681" height="947" alt="image" src="https://github.com/user-attachments/assets/91034825-ec2d-4c83-9164-b43aa4f4b27d" />
<img width="1720" height="946" alt="image" src="https://github.com/user-attachments/assets/555c6aee-2b2d-49d1-82e5-b75788a51ded" />
<img width="1721" height="970" alt="image" src="https://github.com/user-attachments/assets/d877d86c-1016-4181-ac8b-145db90a73e9" />
<img width="1717" height="946" alt="image" src="https://github.com/user-attachments/assets/e0d6136e-c6f7-495f-9ec5-4de72d36f657" />
<img width="1687" height="977" alt="image" src="https://github.com/user-attachments/assets/f4425e55-46cf-42eb-b318-f45d6df3808c" />
<img width="1728" height="967" alt="image" src="https://github.com/user-attachments/assets/681b9c0f-fe42-41f3-8592-1afd220ab437" />
<img width="1707" height="977" alt="image" src="https://github.com/user-attachments/assets/0525f055-3171-43dd-a188-58a126bacb1b" />


consultas
<img width="1682" height="972" alt="image" src="https://github.com/user-attachments/assets/9d03237f-2cda-48b2-b558-681f3c0fee1b" />
<img width="1776" height="712" alt="image" src="https://github.com/user-attachments/assets/ea1e4908-0bd1-422e-b792-498b0fd061a3" />
<img width="1721" height="956" alt="image" src="https://github.com/user-attachments/assets/ad4a55b2-f245-4b16-8eb0-85810a767ea9" />
<img width="1691" height="908" alt="image" src="https://github.com/user-attachments/assets/bba6a4e4-1b2c-472b-a9b2-6c0f0cc1012e" />
<img width="1697" height="965" alt="image" src="https://github.com/user-attachments/assets/9e4ab89c-fdf0-45ca-996f-3c5b689fd7b4" />
facuras
<img width="1742" height="956" alt="image" src="https://github.com/user-attachments/assets/b9851193-754b-4dfd-a20c-af36ceec7f43" />
<img width="1776" height="942" alt="image" src="https://github.com/user-attachments/assets/fc51680f-85fa-4699-a14b-fb85ccf1134d" />
<img width="1717" height="960" alt="image" src="https://github.com/user-attachments/assets/9551b97f-0d68-4ec5-98f9-24ca33725a05" />
<img width="1680" height="955" alt="image" src="https://github.com/user-attachments/assets/617829db-a21b-454c-b16d-7097d0ebf645" />
inventario
<img width="1718" height="958" alt="image" src="https://github.com/user-attachments/assets/9c98c9e1-4c10-4536-b8e6-12d61b4930c2" />
<img width="1735" height="956" alt="image" src="https://github.com/user-attachments/assets/a4055bc7-7407-4f4d-bd98-ce78c5765660" />
<img width="1651" height="918" alt="image" src="https://github.com/user-attachments/assets/12eb5a56-a7db-429b-a96d-01c2f16b226b" />
<img width="1727" height="947" alt="image" src="https://github.com/user-attachments/assets/ba08f089-6b14-4e4c-8901-5755acfbdc53" />
personal
<img width="1728" height="947" alt="image" src="https://github.com/user-attachments/assets/86247ecd-aafb-45ce-81f8-4ec78cd7ddc8" />
<img width="1677" height="930" alt="image" src="https://github.com/user-attachments/assets/002378ad-0bd6-4438-8241-f50a55498b08" />
<img width="1663" height="902" alt="image" src="https://github.com/user-attachments/assets/a61ec827-c059-49bf-9838-8ec9b69bf1bf" />
<img width="1547" height="942" alt="image" src="https://github.com/user-attachments/assets/5982dfb9-f9f5-495c-8fa0-bd095924a74b" />
catalagos vacuna
<img width="1715" height="940" alt="image" src="https://github.com/user-attachments/assets/eb38efd7-66e1-4401-9d54-f013ae25a43b" />
<img width="1660" height="938" alt="image" src="https://github.com/user-attachments/assets/2a2179d5-1244-488a-be6f-4da6117298bc" />
<img width="1603" height="907" alt="image" src="https://github.com/user-attachments/assets/f61ef56f-b28f-431f-80da-3c14bbc4e9cf" />
<img width="1573" height="916" alt="image" src="https://github.com/user-attachments/assets/fda07d08-842c-4410-86ae-df31ea6c5d70" />






















<img width="1682" height="992" alt="image" src="https://github.com/user-attachments/assets/f512b1af-2047-4cbc-8c24-c37980367cb2" />
















from django.db import models


# =======================
# PROPIETARIO
# =======================
    class Propietario(models.Model):
    id_propietario = models.AutoField(primary_key=True)
    nombre = models.CharField(max_length=100)
    apellido = models.CharField(max_length=100)
    direccion = models.CharField(max_length=255, null=True, blank=True)
    telefono = models.CharField(max_length=20, null=True, blank=True)
    email = models.CharField(max_length=100, null=True, blank=True)
    fecha_registro = models.DateField(null=True, blank=True)
    dni = models.CharField(max_length=20, null=True, blank=True)
    ocupacion = models.CharField(max_length=100, null=True, blank=True)

    def __str__(self):
        return f"{self.nombre} {self.apellido}"


# =======================
# MASCOTA
# =======================
class Mascota(models.Model):
    id_mascota = models.AutoField(primary_key=True)
    nombre_mascota = models.CharField(max_length=100)
    especie = models.CharField(max_length=50, null=True, blank=True)
    raza = models.CharField(max_length=50, null=True, blank=True)
    fecha_nacimiento = models.DateField(null=True, blank=True)
    genero = models.CharField(max_length=1, null=True, blank=True)
    peso_kg = models.DecimalField(max_digits=5, decimal_places=2, null=True, blank=True)
    chip_identificacion = models.CharField(max_length=50, null=True, blank=True)
    color = models.CharField(max_length=50, null=True, blank=True)
    esterilizado = models.BooleanField(default=False)

    # FK → Propietario
    id_propietario = models.ForeignKey(
        Propietario,
        on_delete=models.SET_NULL,
        null=True,
        related_name='mascotas'
    )

    def __str__(self):
        return self.nombre_mascota


# =======================
# VETERINARIO
# =======================
class Veterinario(models.Model):
    id_veterinario = models.AutoField(primary_key=True)
    nombre = models.CharField(max_length=100)
    apellido = models.CharField(max_length=100)
    especialidad = models.CharField(max_length=100, null=True, blank=True)
    telefono = models.CharField(max_length=20, null=True, blank=True)
    email = models.CharField(max_length=100, null=True, blank=True)
    licencia_veterinaria = models.CharField(max_length=50, null=True, blank=True)
    fecha_contratacion = models.DateField(null=True, blank=True)
    salario = models.DecimalField(max_digits=10, decimal_places=2, null=True, blank=True)

    def __str__(self):
        return f"{self.nombre} {self.apellido}"


# =======================
# CONSULTA
# =======================
class Consulta(models.Model):
    id_consulta = models.AutoField(primary_key=True)

    # FK → Mascota
    id_mascota = models.ForeignKey(
        Mascota,
        on_delete=models.CASCADE,
        related_name='consultas'
    )

    # FK → Veterinario
    id_veterinario = models.ForeignKey(
        Veterinario,
        on_delete=models.SET_NULL,
        null=True,
        related_name='consultas'
    )

    fecha_consulta = models.DateTimeField()
    motivo_consulta = models.TextField(null=True, blank=True)
    diagnostico = models.TextField(null=True, blank=True)
    tratamiento = models.TextField(null=True, blank=True)
    peso_mascota_consulta = models.DecimalField(max_digits=5, decimal_places=2, null=True, blank=True)
    observaciones = models.TextField(null=True, blank=True)

    def __str__(self):
        return f"Consulta #{self.id_consulta} - {self.id_mascota}"


# =======================
# VACUNA
# =======================
class Vacuna(models.Model):
    id_vacuna = models.AutoField(primary_key=True)
    nombre_vacuna = models.CharField(max_length=100)
    descripcion = models.TextField(null=True, blank=True)
    laboratorio = models.CharField(max_length=100, null=True, blank=True)
    fecha_vencimiento_lote = models.DateField(null=True, blank=True)
    tipo_enfermedad = models.CharField(max_length=100, null=True, blank=True)

    def __str__(self):
        return self.nombre_vacuna


# =======================
# HISTORIAL VACUNACIÓN
# =======================
class Historial_Vacunacion(models.Model):
    id_historial_vac = models.AutoField(primary_key=True)

    # FK → Mascota
    id_mascota = models.ForeignKey(
        Mascota,
        on_delete=models.CASCADE,
        related_name='historial_vacunas'
    )

    # FK → Vacuna
    id_vacuna = models.ForeignKey(
        Vacuna,
        on_delete=models.CASCADE,
        related_name='historial'
    )

    # FK → Veterinario
    id_veterinario_aplico = models.ForeignKey(
        Veterinario,
        on_delete=models.SET_NULL,
        null=True,
        related_name='vacunas_aplicadas'
    )

    fecha_aplicacion = models.DateField()
    fecha_proxima_dosis = models.DateField(null=True, blank=True)
    numero_lote = models.CharField(max_length=50, null=True, blank=True)
    comentarios = models.TextField(null=True, blank=True)

    def __str__(self):
        return f"Vacuna {self.id_vacuna} aplicada a {self.id_mascota}"


# =======================
# FACTURA VETERINARIA
# =======================
class Factura_Veterinaria(models.Model):
    id_factura = models.AutoField(primary_key=True)

    # FK → Propietario
    id_propietario = models.ForeignKey(
        Propietario,
        on_delete=models.SET_NULL,
        null=True,
        related_name='facturas'
    )

    # FK → Consulta
    id_consulta_asociada = models.ForeignKey(
        Consulta,
        on_delete=models.SET_NULL,
        null=True,
        related_name='facturas'
    )

    fecha_emision = models.DateField()
    total_factura = models.DecimalField(max_digits=10, decimal_places=2)
    estado_pago = models.CharField(max_length=50)
    metodo_pago = models.CharField(max_length=50, null=True, blank=True)
    fecha_vencimiento = models.DateField(null=True, blank=True)

    def __str__(self):
        return f"Factura #{self.id_factura}"
